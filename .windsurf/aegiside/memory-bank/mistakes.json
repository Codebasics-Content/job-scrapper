{
  "schema_version": "1.0.0",
  "last_updated": "2025-10-11T23:54:00+05:30",
  "error_patterns": [
    {
      "error_id": "ERR_019",
      "title": "Browserless/Chrome API Mismatch - JSON Parsing Error",
      "category": "integration",
      "severity": "critical",
      "first_occurrence": "2025-10-11T23:54:00+05:30",
      "error_message": "JSONDecodeError: Expecting value: line 1 column 1 (char 0)",
      "root_cause": "HeadlessX client calling /render endpoint which doesn't exist in browserless/chrome Docker image. Browserless uses /content endpoint and returns raw HTML text, not JSON.",
      "resolution": "Updated base_client.py render_url() method to use /content endpoint and response.text instead of response.json()",
      "context7_source": "/docs.browserless.io/llmstxt - POST /content endpoint documentation",
      "status": "resolved",
      "related_files": ["src/scraper/services/base/base_client.py"],
      "fix_details": {
        "changed_endpoint": "/render → /content",
        "changed_response_parsing": "response.json() → response.text",
        "added_timeout_conversion": "timeout (seconds) → waitForTimeout (milliseconds)"
      }
    },
    {
      "error_id": "ERR_018",
      "title": "Luminati Proxy Connection Timeout",
      "category": "network",
      "severity": "high",
      "first_occurrence": "2025-10-11T23:04:00+05:30",
      "error_message": "httpx.ConnectTimeout when connecting to zproxy.lum-superproxy.io:24000",
      "root_cause": "Proxy server unreachable or incorrect configuration",
      "resolution_attempts": [
        "Attempted direct httpx.AsyncClient with proxy parameter",
        "Connection timeout after 30 seconds"
      ],
      "context7_source": "none",
      "status": "investigating",
      "related_files": ["tests/test_actual_luminati_scraping.py"],
      "next_steps": [
        "Verify proxy credentials and endpoint",
        "Test with Luminati Proxy Manager instead of direct connection",
        "Check if proxy requires different authentication"
      ]
    },
    {
      "error_id": "ERR_017",
      "title": "HeadlessX Environment Variables Missing",
      "category": "configuration",
      "severity": "medium",
      "first_occurrence": "2025-10-11T23:02:00+05:30",
      "error_message": "HEADLESSX_BASE_URL and HEADLESSX_TOKEN are required",
      "root_cause": "HeadlessXClient requires env vars but browser rendering blocked due to API incompatibility",
      "resolution": "Documented as blocked - using alternative parser testing with mock HTML. Now resolved with browserless/chrome Docker integration.",
      "context7_source": "none",
      "status": "resolved",
      "workaround": "Docker Compose deployment with browserless/chrome image provides compatible API",
      "related_files": ["tests/test_actual_scraping_100.py", "src/scraper/services/headlessx_client.py", "docker-compose.yml"]
    }
  ],
  "bug_tracking": [],
  "lessons_learned": [
    {
      "lesson_id": "LESSON_009",
      "title": "Browserless Docker API Differs from HeadlessX Service",
      "description": "The browserless/chrome Docker image uses different API endpoints than proprietary HeadlessX services. Always verify API compatibility with official documentation before integration.",
      "category": "infrastructure",
      "date_learned": "2025-10-11T23:54:00+05:30",
      "applies_to": ["web_scraping", "docker_integration", "api_compatibility"],
      "key_differences": {
        "endpoint": "/content instead of /render",
        "response_format": "raw HTML text instead of JSON with html field",
        "timeout_parameter": "waitForTimeout (ms) instead of timeout (s)"
      }
    },
    {
      "lesson_id": "LESSON_008",
      "title": "Proxy Connection Requires Local Proxy Manager",
      "description": "Direct HTTP proxy connections to Luminati may timeout. Native Proxy Manager (npm package) provides more reliable connection.",
      "category": "infrastructure",
      "date_learned": "2025-10-11T23:05:00+05:30",
      "applies_to": ["web_scraping", "proxy_configuration"]
    }
  ]
}
